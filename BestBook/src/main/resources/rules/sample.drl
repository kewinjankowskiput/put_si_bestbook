package com.sample

import com.sample.BestBook;
import com.sample.BestBookUI;


declare Pytanie
    tresc : String
    odpowiedz : String
end


function String input(String question, String[] options){
	BestBookUI $UI = new BestBookUI(question, options);
	while($UI.odpowiedz == null){System.out.print("");};
	String odpowiedz = $UI.odpowiedz;
	return odpowiedz;
}

rule "Init"
    when
    then
    	String[] options = new String[]{"Yes", "No"};
    	String odpowiedz = input("Do you want some good popular fiction?", options);
		insert(new Pytanie("Do you want some good popular fiction?", odpowiedz));
end

rule "Popular fiction - Yes"
    when
        $p : Pytanie(tresc == "Do you want some good popular fiction?", odpowiedz == "Yes")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Thrillers?", options);
	insert(new Pytanie("Thrillers?", odpowiedz));
end

rule "Thrillers - Yes"
    when
        $p : Pytanie(tresc == "Thrillers?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are Before I Go To Sleep, The Girl with the Dragon Tattoo and Nineteen Minutes",
        new String[]{});
		insert(new Pytanie("Conclusion-thrillers", "Your recommendations are Before I Go To Sleep, The Girl with the Dragon Tattoo and Nineteen Minutes"));
end

rule "Thrillers - No"
    when
        $p : Pytanie(tresc == "Thrillers?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Mystery?", options);
	insert(new Pytanie("Mystery?", odpowiedz));
end

rule "Mystery - Yes"
    when
        $p : Pytanie(tresc == "Mystery?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are The Lovely Bones and The Thirteenth Tale",
        new String[]{});
	insert(new Pytanie("Conclusion-Mystery", "Your recommendations are The Lovely Bones and The Thirteenth Tale"));
end

rule "Mystery - No"
    when
        $p : Pytanie(tresc == "Mystery?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Family?", options);
	insert(new Pytanie("Family?", odpowiedz));
end

rule "Family - Yes"
    when
        $p : Pytanie(tresc == "Family?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are Room, My Sister's Keeper, The Memory Keeper's Daughter, and The Language of Flowers",
        new String[]{});
	insert(new Pytanie("Conclusion-Family", "Your recommendations are Room, My Sister's Keeper, The Memory Keeper's Daughter, and The Language of Flowers"));
end

rule "Family - No"
    when
        $p : Pytanie(tresc == "Family?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Fantasy/Horror?", options);
	insert(new Pytanie("Fantasy/Horror?", odpowiedz));
end

rule "Fantasy/Horror - Yes"
    when
        $p : Pytanie(tresc == "Fantasy/Horror?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are The Historian",
        new String[]{});
	insert(new Pytanie("Conclusion-Fantasy/Horror", "Your recommendations are The Historian"));
end

rule "Fantasy/Horror - No"
    when
        $p : Pytanie(tresc == "Fantasy/Horror?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Romance?", options);
	insert(new Pytanie("Romance?", odpowiedz));
end

rule "Romance - Yes"
    when
        $p : Pytanie(tresc == "Romance?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are The Other Boleyn Girl and Snow Flower and the Secret Fan",
        new String[]{});
	insert(new Pytanie("Conclusion-Romance", "Your recommendations are The Other Boleyn Girl and Snow Flower and the Secret Fan"));
end

rule "Romance - No"
    when
        $p : Pytanie(tresc == "Romance?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Time Travel?", options);
	insert(new Pytanie("Time Travel?", odpowiedz));
end

rule "Time Travel - Yes"
    when
        $p : Pytanie(tresc == "Time Travel?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are The Time Traveler's Wife and 11/22/63",
        new String[]{});
	insert(new Pytanie("Conclusion-Time Travel", "Your recommendations are The Time Traveler's Wife and 11/22/63"));
end


rule "Time Travel - No"
    when
        $p : Pytanie(tresc == "Time Travel?", odpowiedz == "No")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("Suspense?", options);
	insert(new Pytanie("Suspense?", odpowiedz));
end

rule "Suspense - Yes"
    when
        $p : Pytanie(tresc == "Suspense?", odpowiedz == "Yes")
    then
        String odpowiedz = input("Your recommendations are Gone Girl, The Da Vinci Code, and Joyland",
        new String[]{});
	insert(new Pytanie("Conclusion-Suspense", "Your recommendations are Gone Girl, The Da Vinci Code, and Joyland"));
end

rule "Suspense - No"
    when
        $p : Pytanie(tresc == "Suspense?", odpowiedz == "No")
    then
         String odpowiedz = input("Sorry, no more recommendations available.",
        new String[]{});
	insert(new Pytanie("Conclusion-No Suspense", "Sorry, no more recommendations available."));
end



rule "Popular fiction  - No"
    when
        $p : Pytanie(tresc == "Do you want some good popular fiction?", odpowiedz == "no")
    then
        String[] options = new String[]{"Yes", "No"};
        String odpowiedz = input("How about literary fiction?", options);
		insert(new Pytanie("How about literary fiction??", odpowiedz));
end


